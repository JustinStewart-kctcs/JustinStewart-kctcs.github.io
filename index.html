<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Data</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.8/handlebars.min.js"></script> 

    <script id="tableTemplate" type="text/x-handlebars-template">
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Major</th>
                    <th>Midterm Score</th>
                    <th>Final Score</th>
                </tr>
            </thead>
            <tbody>
                {{#each students}}
                <tr>
                    <td>{{name}}</td>
                    <td>{{major}}</td>
                    <td>{{midterm}}</td>
                    <td>{{final}}</td>
                </tr>
                {{/each}}
            </tbody>
        </table>
    </script>

    <style>
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            padding: 8px;
            text-align: center;
        }
        th {
            font-size: large;
        }
    </style>
</head>

<body>
    <h1>Select a Major</h1>
    <button id="citButton">CIT Majors</button>
    <button id="busButton">Business Majors</button>

    <h3>We filter our dataset by major</h3>

    <div id="studentTable"></div>

    <script>
        // Function to load and display students based on major
        function loadStudents(major) 
        {
            fetch('cit5students.json')
                .then(response => response.json())
                .then(data => {

                    var source = document.getElementById("tableTemplate").innerHTML;
                    var template = Handlebars.compile(source);

                    var filteredStudents = data.filter(student => student.major === major);

                    var html = template({ students: filteredStudents });

                    document.getElementById('studentTable').innerHTML = html;
                })
                .catch(error => {
                    console.error('Error loading student data:', error);
                });
        }

        // Event listener for CIT Majors button
        document.getElementById("citButton").addEventListener('click', function() {
            loadStudents("CIT");
        });

        // Event listener for Business Majors button
        document.getElementById("busButton").addEventListener('click', function() {
            loadStudents("BUS");
        });
    </script>
</body>
</html>
